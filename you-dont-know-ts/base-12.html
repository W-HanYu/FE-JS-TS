<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>十二、typescript 泛型 | </title><meta name="description" content="">
    <link rel="modulepreload" href="/assets/app.2732c273.js"><link rel="modulepreload" href="/assets/base-12.html.6e443502.js"><link rel="modulepreload" href="/assets/5.3generics.f5b949cb.js"><link rel="modulepreload" href="/assets/base-12.html.79832c6a.js"><link rel="prefetch" href="/assets/1.1.hello-world.html.12bb0e13.js"><link rel="prefetch" href="/assets/1.10.if.html.f72acab8.js"><link rel="prefetch" href="/assets/1.11.includes.html.c44d24e2.js"><link rel="prefetch" href="/assets/1.12.parameters.html.bee3996d.js"><link rel="prefetch" href="/assets/1.13.push.html.1b4a1670.js"><link rel="prefetch" href="/assets/1.14.unshift.html.63c7d941.js"><link rel="prefetch" href="/assets/1.2.Pick.html.16d7c332.js"><link rel="prefetch" href="/assets/1.3.Awaited.html.b7b8861b.js"><link rel="prefetch" href="/assets/1.4.Readonly.html.b0e6536d.js"><link rel="prefetch" href="/assets/1.5.Tuple-to-object.html.fdea6785.js"><link rel="prefetch" href="/assets/1.6.First-of-array.html.85cfae14.js"><link rel="prefetch" href="/assets/1.7.Length-of-Tuple.html.6c7e67cd.js"><link rel="prefetch" href="/assets/1.8.concat.html.7ba570b8.js"><link rel="prefetch" href="/assets/1.9.exclude.html.101ba010.js"><link rel="prefetch" href="/assets/2.1.Get-Return-Type.html.23e52fd1.js"><link rel="prefetch" href="/assets/2.2.omit.html.64e70725.js"><link rel="prefetch" href="/assets/2.3.Readonly2.html.3ba1e1ed.js"><link rel="prefetch" href="/assets/2.4.Deep-Readonly.html.d64b17c0.js"><link rel="prefetch" href="/assets/2.5.turn-to-union.html.fdcd0d90.js"><link rel="prefetch" href="/assets/3.1.Simple-Vue.html.841c3f0c.js"><link rel="prefetch" href="/assets/basic-1.html.c99e29f8.js"><link rel="prefetch" href="/assets/basic-2.html.befd557a.js"><link rel="prefetch" href="/assets/basic-3.html.7785812c.js"><link rel="prefetch" href="/assets/http-2.html.12989505.js"><link rel="prefetch" href="/assets/http-3.html.08c090fa.js"><link rel="prefetch" href="/assets/http-interview.html.f13f1d3f.js"><link rel="prefetch" href="/assets/http-optimize.html.bf9f6968.js"><link rel="prefetch" href="/assets/http-rpc.html.bb365a52.js"><link rel="prefetch" href="/assets/http-websocket.html.ae2081a0.js"><link rel="prefetch" href="/assets/https-ecdhe.html.9f35e6f0.js"><link rel="prefetch" href="/assets/https-optimize.html.390116d3.js"><link rel="prefetch" href="/assets/https-rsa.html.2235cc59.js"><link rel="prefetch" href="/assets/ip-base.html.90345cd2.js"><link rel="prefetch" href="/assets/ip-ping.html.0f9b754e.js"><link rel="prefetch" href="/assets/ip-ping_io.html.efd92845.js"><link rel="prefetch" href="/assets/tcp-challenge-ack.html.45ee9061.js"><link rel="prefetch" href="/assets/tcp-dump.html.1b348a83.js"><link rel="prefetch" href="/assets/tcp-feature.html.b3c16c5e.js"><link rel="prefetch" href="/assets/tcp-interview.html.48df2854.js"><link rel="prefetch" href="/assets/tcp-isn-deff.html.a1946069.js"><link rel="prefetch" href="/assets/tcp-optimize.html.de55ffb0.js"><link rel="prefetch" href="/assets/tcp-out-of-order-fin.html.6aabbf58.js"><link rel="prefetch" href="/assets/tcp-queue.html.1c9e6a35.js"><link rel="prefetch" href="/assets/tcp-stream.html.ee2d3d84.js"><link rel="prefetch" href="/assets/tcp-syn.html.3e59422b.js"><link rel="prefetch" href="/assets/donate.html.2cae8f34.js"><link rel="prefetch" href="/assets/Routine1_pattern-matching-for-extraction.html.4581b4a7.js"><link rel="prefetch" href="/assets/Advanced-1.html.8d2432f5.js"><link rel="prefetch" href="/assets/Advanced-2.html.e6b41dcd.js"><link rel="prefetch" href="/assets/Advanced-3.html.02c0f8ee.js"><link rel="prefetch" href="/assets/Advanced-4.html.bae0f87a.js"><link rel="prefetch" href="/assets/Advanced-5.html.ef54bdb7.js"><link rel="prefetch" href="/assets/Extended-article-1.html.6527bd62.js"><link rel="prefetch" href="/assets/base-1.html.a43c4fd1.js"><link rel="prefetch" href="/assets/base-10.html.d0831bd8.js"><link rel="prefetch" href="/assets/base-11.html.4496f83d.js"><link rel="prefetch" href="/assets/base-13.html.4bf60c07.js"><link rel="prefetch" href="/assets/base-14.html.d79f3cc0.js"><link rel="prefetch" href="/assets/base-15.html.dc3b02fd.js"><link rel="prefetch" href="/assets/base-16.html.1a6b056d.js"><link rel="prefetch" href="/assets/base-17.html.676ddfa7.js"><link rel="prefetch" href="/assets/base-2.html.b4e3e3bb.js"><link rel="prefetch" href="/assets/base-3.html.7cf0e88c.js"><link rel="prefetch" href="/assets/base-4.html.0563ab94.js"><link rel="prefetch" href="/assets/base-5.html.f5a97bbe.js"><link rel="prefetch" href="/assets/base-6.html.3804d797.js"><link rel="prefetch" href="/assets/base-7.html.02a73438.js"><link rel="prefetch" href="/assets/base-8.html.54b87968.js"><link rel="prefetch" href="/assets/base-9.html.b28caa5b.js"><link rel="prefetch" href="/assets/rollup-1.html.a09cc8f8.js"><link rel="prefetch" href="/assets/rollup-10.html.380c6c94.js"><link rel="prefetch" href="/assets/rollup-11.html.dbc44e7c.js"><link rel="prefetch" href="/assets/rollup-2.html.34b3a1ef.js"><link rel="prefetch" href="/assets/rollup-3.html.bcde5ca1.js"><link rel="prefetch" href="/assets/rollup-4.html.8ab5da20.js"><link rel="prefetch" href="/assets/rollup-5.html.d5f10cc2.js"><link rel="prefetch" href="/assets/rollup-6.html.2caef2ac.js"><link rel="prefetch" href="/assets/rollup-7.html.4fe74d70.js"><link rel="prefetch" href="/assets/rollup-8.html.022d94fd.js"><link rel="prefetch" href="/assets/rollup-9.html.d33d4d29.js"><link rel="prefetch" href="/assets/scope-closures-appA.html.859f030a.js"><link rel="prefetch" href="/assets/scope-closures-appB.html.a0447478.js"><link rel="prefetch" href="/assets/scope-closures-appC.html.fccb9bd0.js"><link rel="prefetch" href="/assets/this-object-prototype-appA.html.619d20c0.js"><link rel="prefetch" href="/assets/async-performance-apA.html.64f96d6a.js"><link rel="prefetch" href="/assets/async-performance-apB.html.f2d9dbc0.js"><link rel="prefetch" href="/assets/async-performance-ch1.html.3bc9cccc.js"><link rel="prefetch" href="/assets/async-performance-ch2.html.b77c330c.js"><link rel="prefetch" href="/assets/async-performance-ch3.html.c5827605.js"><link rel="prefetch" href="/assets/async-performance-ch4.html.ad52181d.js"><link rel="prefetch" href="/assets/async-performance-ch5.html.0a596a07.js"><link rel="prefetch" href="/assets/async-performance-ch6.html.e8dec630.js"><link rel="prefetch" href="/assets/types-grammar-1.html.d89fd0a1.js"><link rel="prefetch" href="/assets/types-grammar-2.html.96e6de3c.js"><link rel="prefetch" href="/assets/types-grammar-3.html.87ee510d.js"><link rel="prefetch" href="/assets/types-grammar-4.html.952854e5.js"><link rel="prefetch" href="/assets/types-grammar-5.html.44b27133.js"><link rel="prefetch" href="/assets/types-grammar-apA.html.f2ab8088.js"><link rel="prefetch" href="/assets/404.html.d2dc3323.js"><link rel="prefetch" href="/assets/1.1.hello-world.html.6b32ee7f.js"><link rel="prefetch" href="/assets/1.10.if.html.a30b50ce.js"><link rel="prefetch" href="/assets/1.11.includes.html.917fecad.js"><link rel="prefetch" href="/assets/1.12.parameters.html.dd7eb513.js"><link rel="prefetch" href="/assets/1.13.push.html.067470a0.js"><link rel="prefetch" href="/assets/1.14.unshift.html.475666e8.js"><link rel="prefetch" href="/assets/1.2.Pick.html.31b62876.js"><link rel="prefetch" href="/assets/1.3.Awaited.html.fd475d3d.js"><link rel="prefetch" href="/assets/1.4.Readonly.html.7a7189dd.js"><link rel="prefetch" href="/assets/1.5.Tuple-to-object.html.a53be02d.js"><link rel="prefetch" href="/assets/1.6.First-of-array.html.0782c3f7.js"><link rel="prefetch" href="/assets/1.7.Length-of-Tuple.html.9e1fd19e.js"><link rel="prefetch" href="/assets/1.8.concat.html.1cf3343a.js"><link rel="prefetch" href="/assets/1.9.exclude.html.4c2ecd0a.js"><link rel="prefetch" href="/assets/2.1.Get-Return-Type.html.b975c251.js"><link rel="prefetch" href="/assets/2.2.omit.html.5ddbebba.js"><link rel="prefetch" href="/assets/2.3.Readonly2.html.b74d9d13.js"><link rel="prefetch" href="/assets/2.4.Deep-Readonly.html.82d5b3e0.js"><link rel="prefetch" href="/assets/2.5.turn-to-union.html.1f80ce3a.js"><link rel="prefetch" href="/assets/3.1.Simple-Vue.html.70a89768.js"><link rel="prefetch" href="/assets/basic-1.html.149ea828.js"><link rel="prefetch" href="/assets/basic-2.html.ca98104f.js"><link rel="prefetch" href="/assets/basic-3.html.80c2b0ef.js"><link rel="prefetch" href="/assets/http-2.html.9de4c236.js"><link rel="prefetch" href="/assets/http-3.html.09bd38c0.js"><link rel="prefetch" href="/assets/http-interview.html.1148894c.js"><link rel="prefetch" href="/assets/http-optimize.html.54a0c422.js"><link rel="prefetch" href="/assets/http-rpc.html.8332fee1.js"><link rel="prefetch" href="/assets/http-websocket.html.47ad85db.js"><link rel="prefetch" href="/assets/https-ecdhe.html.e91cfb43.js"><link rel="prefetch" href="/assets/https-optimize.html.8d39b884.js"><link rel="prefetch" href="/assets/https-rsa.html.0ee93ec3.js"><link rel="prefetch" href="/assets/ip-base.html.f78389b5.js"><link rel="prefetch" href="/assets/ip-ping.html.076a41e0.js"><link rel="prefetch" href="/assets/ip-ping_io.html.2f830af1.js"><link rel="prefetch" href="/assets/tcp-challenge-ack.html.30a1640f.js"><link rel="prefetch" href="/assets/tcp-dump.html.bc00b56c.js"><link rel="prefetch" href="/assets/tcp-feature.html.447edc97.js"><link rel="prefetch" href="/assets/tcp-interview.html.ae96c119.js"><link rel="prefetch" href="/assets/tcp-isn-deff.html.6409b73d.js"><link rel="prefetch" href="/assets/tcp-optimize.html.7c31235c.js"><link rel="prefetch" href="/assets/tcp-out-of-order-fin.html.1c3be459.js"><link rel="prefetch" href="/assets/tcp-queue.html.b16b276a.js"><link rel="prefetch" href="/assets/tcp-stream.html.79811e94.js"><link rel="prefetch" href="/assets/tcp-syn.html.b9ff2183.js"><link rel="prefetch" href="/assets/donate.html.5ff8f8b2.js"><link rel="prefetch" href="/assets/Routine1_pattern-matching-for-extraction.html.3cb62a86.js"><link rel="prefetch" href="/assets/Advanced-1.html.a9f96920.js"><link rel="prefetch" href="/assets/Advanced-2.html.8bf53bf0.js"><link rel="prefetch" href="/assets/Advanced-3.html.930ef532.js"><link rel="prefetch" href="/assets/Advanced-4.html.6d1670c8.js"><link rel="prefetch" href="/assets/Advanced-5.html.da74c914.js"><link rel="prefetch" href="/assets/Extended-article-1.html.28b64e88.js"><link rel="prefetch" href="/assets/base-1.html.10097d3f.js"><link rel="prefetch" href="/assets/base-10.html.4a94d3cd.js"><link rel="prefetch" href="/assets/base-11.html.b7603498.js"><link rel="prefetch" href="/assets/base-13.html.452c1c73.js"><link rel="prefetch" href="/assets/base-14.html.2e06baba.js"><link rel="prefetch" href="/assets/base-15.html.ecafd016.js"><link rel="prefetch" href="/assets/base-16.html.010cddba.js"><link rel="prefetch" href="/assets/base-17.html.a2d9bdd2.js"><link rel="prefetch" href="/assets/base-2.html.57994479.js"><link rel="prefetch" href="/assets/base-3.html.c5132b69.js"><link rel="prefetch" href="/assets/base-4.html.ab60619e.js"><link rel="prefetch" href="/assets/base-5.html.bfea0c7b.js"><link rel="prefetch" href="/assets/base-6.html.90ac203e.js"><link rel="prefetch" href="/assets/base-7.html.13524081.js"><link rel="prefetch" href="/assets/base-8.html.4776e28c.js"><link rel="prefetch" href="/assets/base-9.html.9f80d955.js"><link rel="prefetch" href="/assets/rollup-1.html.2cdd8e14.js"><link rel="prefetch" href="/assets/rollup-10.html.ea13c41b.js"><link rel="prefetch" href="/assets/rollup-11.html.5624634f.js"><link rel="prefetch" href="/assets/rollup-2.html.0c0b9295.js"><link rel="prefetch" href="/assets/rollup-3.html.58a2f1c5.js"><link rel="prefetch" href="/assets/rollup-4.html.151de338.js"><link rel="prefetch" href="/assets/rollup-5.html.4f8a64e7.js"><link rel="prefetch" href="/assets/rollup-6.html.6eb27e8e.js"><link rel="prefetch" href="/assets/rollup-7.html.16470a16.js"><link rel="prefetch" href="/assets/rollup-8.html.edc2c3d9.js"><link rel="prefetch" href="/assets/rollup-9.html.f5589eac.js"><link rel="prefetch" href="/assets/scope-closures-appA.html.2ed34ab1.js"><link rel="prefetch" href="/assets/scope-closures-appB.html.49b03091.js"><link rel="prefetch" href="/assets/scope-closures-appC.html.654e0db6.js"><link rel="prefetch" href="/assets/this-object-prototype-appA.html.badd495b.js"><link rel="prefetch" href="/assets/async-performance-apA.html.f8358188.js"><link rel="prefetch" href="/assets/async-performance-apB.html.26418b76.js"><link rel="prefetch" href="/assets/async-performance-ch1.html.f2c7e589.js"><link rel="prefetch" href="/assets/async-performance-ch2.html.1bee35ef.js"><link rel="prefetch" href="/assets/async-performance-ch3.html.5c60e4af.js"><link rel="prefetch" href="/assets/async-performance-ch4.html.0f54e284.js"><link rel="prefetch" href="/assets/async-performance-ch5.html.aa5fe27e.js"><link rel="prefetch" href="/assets/async-performance-ch6.html.539cebfb.js"><link rel="prefetch" href="/assets/types-grammar-1.html.97fdf006.js"><link rel="prefetch" href="/assets/types-grammar-2.html.e3a0371a.js"><link rel="prefetch" href="/assets/types-grammar-3.html.522bd1ea.js"><link rel="prefetch" href="/assets/types-grammar-4.html.49220150.js"><link rel="prefetch" href="/assets/types-grammar-5.html.fcf911de.js"><link rel="prefetch" href="/assets/types-grammar-apA.html.bac17dde.js"><link rel="prefetch" href="/assets/404.html.a850b954.js">
    <link rel="stylesheet" href="/assets/style.f4d22aab.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><!--v-if--></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">十二、typescript 泛型 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/you-dont-know-ts/base-12.html#十二、typescript-泛型" class="router-link-active router-link-exact-active sidebar-item" aria-label="十二、typescript 泛型"><!--[--><!--]--> 十二、typescript 泛型 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/you-dont-know-ts/base-12.html#_12-1-泛型语法" class="router-link-active router-link-exact-active sidebar-item" aria-label="12.1 泛型语法"><!--[--><!--]--> 12.1 泛型语法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/you-dont-know-ts/base-12.html#_12-2-泛型接口" class="router-link-active router-link-exact-active sidebar-item" aria-label="12.2 泛型接口"><!--[--><!--]--> 12.2 泛型接口 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/you-dont-know-ts/base-12.html#_12-3-泛型类" class="router-link-active router-link-exact-active sidebar-item" aria-label="12.3 泛型类"><!--[--><!--]--> 12.3 泛型类 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/you-dont-know-ts/base-12.html#_12-4-泛型工具类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="12.4 泛型工具类型"><!--[--><!--]--> 12.4 泛型工具类型 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h2 id="十二、typescript-泛型" tabindex="-1"><a class="header-anchor" href="#十二、typescript-泛型" aria-hidden="true">#</a> 十二、typescript 泛型</h2><p>软件工程中，我们不仅要创建一致的定义良好的 API，同时也要考虑可重用性。 组件不仅能够支持当前的数据类型，同时也能支持未来的数据类型，这在创建大型系统时为你提供了十分灵活的功能。</p><p>在像 C# 和 Java 这样的语言中，可以使用泛型来创建可重用的组件，一个组件可以支持多种类型的数据。 这样用户就可以以自己的数据类型来使用组件。</p><p>设计泛型的关键目的是在成员之间提供有意义的约束，这些成员可以是：类的实例成员、类的方法、函数参数和函数返回值。</p><p>泛型（Generics）是允许同一个函数接受不同类型参数的一种模板。相比于使用 any 类型，使用泛型来创建可复用的组件要更好，因为泛型会保留参数类型。</p><h3 id="_12-1-泛型语法" tabindex="-1"><a class="header-anchor" href="#_12-1-泛型语法" aria-hidden="true">#</a> 12.1 泛型语法</h3><p>对于刚接触 TypeScript 泛型的读者来说，首次看到&lt;T&gt; 语法会感到陌生。其实它没有什么特别，就像传递参数一样，我们传递了我们想要用于特定函数调用的类型。</p><p><img src="/assets/5.2generics.2eb1a0e3.png" alt="1"></p><p>参考上面的图片，当我们调用 identity&lt;Number&gt;(1) ，Number 类型就像参数 1 一样，它将在出现 T 的任何位置填充该类型。图中 &lt;T&gt; 内部的 T 被称为类型变量，它是我们希望传递给 identity 函数的类型占位符，同时它被分配给 value 参数用来代替它的类型：此时 T 充当的是类型，而不是特定的 Number 类型。 其中 T 代表 Type，在定义泛型时通常用作第一个类型变量名称。但实际上 T 可以用任何有效名称代替。除了 T 之外，以下是常见泛型变量代表的意思：</p><blockquote><ul><li>K（Key）：表示对象中的键类型；</li><li>V（Value）：表示对象中的值类型；</li><li>E（Element）：表示元素类型。</li></ul></blockquote><p>其实并不是只能定义一个类型变量，我们可以引入希望定义的任何数量的类型变量。比如我们引入一个新的类型变量 U，用于扩展我们定义的 identity 函数：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">identity</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">identity</span><span class="token generic class-name"><span class="token operator">&lt;</span>Number<span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token number">68</span><span class="token punctuation">,</span> <span class="token string">&quot;Semlinker&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/assets/5.3generics.2e99c4dd.png" alt="1"></p><p>除了为类型变量显式设定值之外，一种更常见的做法是使编译器自动选择这些类型，从而使代码更简洁。我们可以完全省略尖括号，比如：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">identity</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">identity</span><span class="token punctuation">(</span><span class="token number">68</span><span class="token punctuation">,</span> <span class="token string">&quot;Semlinker&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对于上述代码，编译器足够聪明，能够知道我们的参数类型，并将它们赋值给 T 和 U，而不需要开发人员显式指定它们。</p><h3 id="_12-2-泛型接口" tabindex="-1"><a class="header-anchor" href="#_12-2-泛型接口" aria-hidden="true">#</a> 12.2 泛型接口</h3><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">GenericIdentityFn<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12-3-泛型类" tabindex="-1"><a class="header-anchor" href="#_12-3-泛型类" aria-hidden="true">#</a> 12.3 泛型类</h3><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">GenericNumber<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  zeroValue<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
  <span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> myGenericNumber <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GenericNumber<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myGenericNumber<span class="token punctuation">.</span>zeroValue <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
myGenericNumber<span class="token punctuation">.</span><span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12-4-泛型工具类型" tabindex="-1"><a class="header-anchor" href="#_12-4-泛型工具类型" aria-hidden="true">#</a> 12.4 泛型工具类型</h3><p>为了方便开发者 TypeScript 内置了一些常用的工具类型，比如 Partial、Required、Readonly、Record 和 ReturnType 等。出于篇幅考虑，这里我们只简单介绍 Partial 工具类型。不过在具体介绍之前，我们得先介绍一些相关的基础知识，方便读者自行学习其它的工具类型。</p><h4 id="_12-4-1-typeof" tabindex="-1"><a class="header-anchor" href="#_12-4-1-typeof" aria-hidden="true">#</a> 12.4.1.typeof</h4><p>在 TypeScript 中，typeof 操作符可以用来获取一个变量声明或对象的类型。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> sem<span class="token operator">:</span> Person <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;semlinker&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">33</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">Sem</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> sem<span class="token punctuation">;</span> <span class="token comment">// -&gt; Person</span>

<span class="token keyword">function</span> <span class="token function">toArray</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Func</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> toArray<span class="token punctuation">;</span> <span class="token comment">// -&gt; (x: number) =&gt; number[]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_12-4-2-keyof" tabindex="-1"><a class="header-anchor" href="#_12-4-2-keyof" aria-hidden="true">#</a> 12.4.2.keyof</h4><p>keyof 操作符是在 TypeScript 2.1 版本引入的，该操作符可以用于获取某种类型的所有键，其返回类型是联合类型。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">K1</span></span> <span class="token operator">=</span> <span class="token keyword">keyof</span> Person<span class="token punctuation">;</span> <span class="token comment">// &quot;name&quot; | &quot;age&quot;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">K2</span></span> <span class="token operator">=</span> <span class="token keyword">keyof</span> Person<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// &quot;length&quot; | &quot;toString&quot; | &quot;pop&quot; | &quot;push&quot; | &quot;concat&quot; | &quot;join&quot;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">K3</span></span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>x<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> Person <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// string | number</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 TypeScript 中支持两种索引签名，数字索引和字符串索引：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">StringArray</span> <span class="token punctuation">{</span>
  <span class="token comment">// 字符串索引 -&gt; keyof StringArray =&gt; string | number</span>
  <span class="token punctuation">[</span>index<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">StringArray1</span> <span class="token punctuation">{</span>
  <span class="token comment">// 数字索引 -&gt; keyof StringArray1 =&gt; number</span>
  <span class="token punctuation">[</span>index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>为了同时支持两种索引类型，就得要求数字索引的返回值必须是字符串索引返回值的子类。其中的原因就是当使用数值索引时，JavaScript 在执行索引操作时，会先把数值索引先转换为字符串索引。所以 keyof { [x: string]: Person } 的结果会返回 string | number。</p><h4 id="_12-4-3-in" tabindex="-1"><a class="header-anchor" href="#_12-4-3-in" aria-hidden="true">#</a> 12.4.3.in</h4><p>in 用来遍历枚举类型：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Keys</span> <span class="token operator">=</span> <span class="token string">&quot;a&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;b&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">Obj</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>p <span class="token keyword">in</span> Keys<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// -&gt; { a: any, b: any, c: any }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_12-4-4-infer" tabindex="-1"><a class="header-anchor" href="#_12-4-4-infer" aria-hidden="true">#</a> 12.4.4.infer</h4><p>在条件类型语句中，可以用 infer 声明一个类型变量并且对它进行使用。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">ReturnType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">infer</span> <span class="token constant">R</span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>以上代码中 infer R 就是声明一个变量来承载传入函数签名的返回值类型，简单说就是用它取到函数返回值的类型方便之后使用。</p><h4 id="_12-4-5-extends" tabindex="-1"><a class="header-anchor" href="#_12-4-5-extends" aria-hidden="true">#</a> 12.4.5.extends</h4><p>有时候我们定义的泛型不想过于灵活或者说想继承某些类等，可以通过 extends 关键字添加泛型约束。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Lengthwise</span> <span class="token punctuation">{</span>
  length<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">loggingIdentity</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> Lengthwise<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> arg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>现在这个泛型函数被定义了约束，因此它不再是适用于任意类型：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token function">loggingIdentity</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error, number doesn&#39;t have a .length property</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这时我们需要传入符合约束类型的值，必须包含必须的属性：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token function">loggingIdentity</span><span class="token punctuation">(</span><span class="token punctuation">{</span> length<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_12-4-6-partial" tabindex="-1"><a class="header-anchor" href="#_12-4-6-partial" aria-hidden="true">#</a> 12.4.6.Partial</h4><p>Partial&lt;T&gt; 的作用就是将某个类型里的属性全部变为可选项 ?。</p><p>定义：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token doc-comment comment">/**

- node_modules/typescript/lib/lib.es5.d.ts
- Make all properties in T optional
  */</span>
<span class="token keyword">type</span> <span class="token class-name">Partial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在以上代码中，首先通过 keyof T 拿到 T 的所有属性名，然后使用 in 进行遍历，将值赋给 P，最后通过 T[P] 取得相应的属性值。中间的 ? 号，用于将所有属性变为可选。</p><p>示例：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Todo</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  description<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">updateTodo</span><span class="token punctuation">(</span>todo<span class="token operator">:</span> Todo<span class="token punctuation">,</span> fieldsToUpdate<span class="token operator">:</span> Partial<span class="token operator">&lt;</span>Todo<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>todo<span class="token punctuation">,</span> <span class="token operator">...</span>fieldsToUpdate <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> todo1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token string">&quot;Learn TS&quot;</span><span class="token punctuation">,</span>
  description<span class="token operator">:</span> <span class="token string">&quot;Learn TypeScript&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> todo2 <span class="token operator">=</span> <span class="token function">updateTodo</span><span class="token punctuation">(</span>todo1<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  description<span class="token operator">:</span> <span class="token string">&quot;Learn TypeScript Enum&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在上面的 updateTodo 方法中，我们利用 Partial&lt;T&gt; 工具类型，定义 fieldsToUpdate 的类型为 Partial&lt;Todo&gt;，即：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token punctuation">{</span>
title<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
description<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 1453300745@qq.com">wangtao</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.2732c273.js" defer></script>
  </body>
</html>
